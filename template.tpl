___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Commanders Act | Serverside events bridge",
  "categories": [
    "CONVERSIONS",
    "UTILITY",
    "TAG_MANAGEMENT"
  ],
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d\u003d"
  },
  "description": "A template using Commanders Act\u0027s reference specifications to perform advanced serverside activation use cases.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "caSiteId",
    "displayName": "Commanders Act Site ID:",
    "simpleValueType": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      },
      {
        "type": "NUMBER"
      }
    ],
    "alwaysInSummary": true,
    "help": "The site identifier for your activity. This is provided by Commanders Act."
  },
  {
    "type": "LABEL",
    "name": "label1",
    "displayName": "(NEW) A source key is now required. Check our documentation if needed."
  },
  {
    "type": "TEXT",
    "name": "caSourceKey",
    "displayName": "Commanders Act Source Key:",
    "simpleValueType": true,
    "help": "After creating a \"Google Tag Manager\" source in Commanders Act, you are provided with a corresponding source key. Check our documentation if needed.",
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "alwaysInSummary": true
  },
  {
    "type": "CHECKBOX",
    "name": "isCustomSettingsOn",
    "checkboxText": "Custom Settings",
    "simpleValueType": true
  },
  {
    "type": "TEXT",
    "name": "caCollectionDomain",
    "displayName": "Commanders Act Collection Domain:",
    "simpleValueType": true,
    "alwaysInSummary": false,
    "defaultValue": "collect.commander1.com",
    "enablingConditions": [
      {
        "paramName": "isCustomSettingsOn",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ],
    "valueHint": "collect.commander1.com",
    "help": "Commanders Act domain for event collection. Default: \"collect.commander1.com\". Do not change it unless it\u0027s pointed by your Commanders Act account manager."
  },
  {
    "type": "TEXT",
    "name": "customEventId",
    "displayName": "Facebook Custom Event Id:",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "isCustomSettingsOn",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Instead of using our generated value for the \"Event Id\", you can use a previously generated one by passing it in this field."
  },
  {
    "type": "TEXT",
    "name": "testEventCode",
    "displayName": "Facebook Test Event Code:",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "isCustomSettingsOn",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "help": "Code used to verify that your server events are received correctly by Facebook. Use this code to test your server events in the \"Test Events\" feature - See Facebook \"Events Manager\" for more details."
  },
  {
    "type": "TEXT",
    "name": "callbackFunction",
    "displayName": "Callback Function:",
    "simpleValueType": true,
    "help": "A callback function that’s called after triggering the selected event. More details are available following this \u003ca href\u003d\"https://community.commandersact.com/platform-x/features/integrations/sources/sources-catalog/javascript-sdk#get-information\"\u003eLINK\u003c/a\u003e",
    "enablingConditions": [
      {
        "paramName": "isCustomSettingsOn",
        "paramValue": true,
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "caEvent",
    "displayName": "Commanders Act Event:",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "add_shipping_info",
        "displayValue": "Add Shipping Info"
      },
      {
        "value": "add_payment_info",
        "displayValue": "Add Payment Info"
      },
      {
        "value": "add_to_cart",
        "displayValue": "Add to Cart"
      },
      {
        "value": "purchase",
        "displayValue": "Purchase"
      },
      {
        "value": "add_to_wishlist",
        "displayValue": "Add to Wish"
      },
      {
        "value": "begin_checkout",
        "displayValue": "Begin Checkout"
      },
      {
        "value": "generate_lead",
        "displayValue": "Generate Lead"
      },
      {
        "value": "login",
        "displayValue": "Login"
      },
      {
        "value": "page_view",
        "displayValue": "Page View"
      },
      {
        "value": "refund",
        "displayValue": "Refund"
      },
      {
        "value": "remove_from_cart",
        "displayValue": "Remove from Cart"
      },
      {
        "value": "search",
        "displayValue": "Search"
      },
      {
        "value": "select_content",
        "displayValue": "Select Content"
      },
      {
        "value": "select_item",
        "displayValue": "Select Item"
      },
      {
        "value": "sign_up",
        "displayValue": "Sign up"
      },
      {
        "value": "view_cart",
        "displayValue": "View Cart"
      },
      {
        "value": "view_item",
        "displayValue": "View Item"
      },
      {
        "value": "view_item_list",
        "displayValue": "View Item List"
      },
      {
        "value": "custom_event",
        "displayValue": "[Custom Event]"
      }
    ],
    "simpleValueType": true,
    "alwaysInSummary": true,
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "TEXT",
    "name": "customEventName",
    "displayName": "Custom Event Name:",
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "caEvent",
        "paramValue": "custom_event",
        "type": "EQUALS"
      }
    ],
    "valueValidators": [
      {
        "type": "NON_EMPTY"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "eventFields",
    "displayName": "Standard fields",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "transactionId",
        "displayName": "Transaction Id:",
        "simpleValueType": true,
        "help": "Transaction id. Used as key for updates.",
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ],
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          }
        ],
        "defaultValue": ""
      },
      {
        "type": "TEXT",
        "name": "leadId",
        "displayName": "Lead Id:",
        "simpleValueType": true,
        "help": "Lead id.",
        "valueValidators": [],
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "generate_lead",
            "type": "EQUALS"
          }
        ],
        "defaultValue": ""
      },
      {
        "type": "TEXT",
        "name": "revenue",
        "displayName": "Revenue:",
        "simpleValueType": true,
        "help": "Revenue, shipping price and taxes excluded, after discount.\n(*) \"Revenue\" is typically required for meaningful reporting.\n(*) \"Currency\" is required if you set revenue.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_payment_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "begin_checkout",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "view_item",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "begin_checkout",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "refund",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "view_item",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "conversionType",
        "displayName": "Type:",
        "simpleValueType": true,
        "help": "Type of conversion (online, offline, call etc.).",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "refund",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "value",
        "displayName": "Value:",
        "simpleValueType": true,
        "help": "The monetary value of the event (shipping price and taxes included) after discount.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_shipping_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_to_cart",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_to_wishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "begin_checkout",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "generate_lead",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "remove_from_cart",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "view_cart",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "begin_checkout",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "generate_lead",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "refund",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "currency",
        "displayName": "Currency:",
        "simpleValueType": true,
        "help": "Currency of the purchase or items associated with the event, in 3-letter ISO 4217 format.\n(*) If you supply the \"Revenue\" or \"Value\" parameter, you must also supply the currency parameter so metrics can be computed accurately.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_payment_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_shipping_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_to_cart",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_to_wishlist",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "begin_checkout",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "generate_lead",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "remove_from_cart",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "view_cart",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "view_item",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "revenue",
                "paramValue": "",
                "type": "PRESENT"
              },
              {
                "paramName": "value",
                "paramValue": "",
                "type": "PRESENT"
              },
              {
                "paramName": "caEvent",
                "paramValue": "begin_checkout",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "generate_lead",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "refund",
                "type": "EQUALS"
              }
            ],
            "errorMessage": "If you supply the \"Revenue\" and/or \"Value\", you must also supply the \"Currency\" so metrics can be computed accurately."
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "paymentMethod",
        "displayName": "Payment Method:",
        "simpleValueType": true,
        "help": "Payment method type. Accepted values: \"by_invoice\", \"by_bank_transfer_in_advance\", \"card\", \"check_in_advance\", \"cod\", \"coupon\", \"direct_debit\", \"online_payment_system\", \"other\", all without quotes.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_payment_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "status",
        "displayName": "Status:",
        "simpleValueType": true,
        "help": "Status of the conversion. Accepted values: \"canceled\", \"delivered\", \"in_progress\", \"partially_delivered\", \"partially_returned\", \"partially_shipped\", \"pending_shipment\", \"returned\", \"shipped\", \"pending\". All without quotes.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "shippingAmount",
        "displayName": "Shipping Amount:",
        "simpleValueType": true,
        "help": "Shipping cost associated with a transaction.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "shippingTier",
        "displayName": "Shipping Tier:",
        "simpleValueType": true,
        "help": "The shipping tier (e.g.  Air, Next-day) selected as delivery method.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_shipping_info",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "taxAmount",
        "displayName": "Tax Amount:",
        "simpleValueType": true,
        "help": "Tax amount associated with a transaction.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "coupon",
        "displayName": "Coupon:",
        "simpleValueType": true,
        "help": "Coupon code used for a purchase.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "add_payment_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "add_shipping_info",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "begin_checkout",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "refund",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "method",
        "displayName": "Method:",
        "simpleValueType": true,
        "help": "The method used to login.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "login",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "pageType",
        "displayName": "Page Type:",
        "simpleValueType": true,
        "help": "Page category. Recommended predefined types: \"home\", \"landing\", \"product_list\", \"product\", \"content_list\", \"content\", \"search\", \"funnel\", \"success\", \"funnel_confirmation\", \"account\", \"cart\", \"legal\" (e.g. Privacy Policy). All without quotes.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "page_view",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "page_view",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "pageName",
        "displayName": "Page Name:",
        "simpleValueType": true,
        "help": "Name of the page.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "page_view",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "searchTerm",
        "displayName": "Search Term:",
        "simpleValueType": true,
        "help": "The term that was searched for.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "search",
            "type": "EQUALS"
          }
        ],
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "search",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "contentType",
        "displayName": "Content Type:",
        "simpleValueType": true,
        "help": "The type of selected content.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "select_content",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "itemId",
        "displayName": "Item Id:",
        "simpleValueType": true,
        "help": "An identifier for the item that was selected.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "select_content",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "itemListName",
        "displayName": "Item List Name:",
        "simpleValueType": true,
        "help": "The name of the list in which the item was presented to the user.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "select_item",
            "type": "EQUALS"
          },
          {
            "paramName": "caEvent",
            "paramValue": "view_item_list",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "signupMethod",
        "displayName": "Sign-up Method:",
        "simpleValueType": true,
        "help": "The method used for sign-up.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "sign_up",
            "type": "EQUALS"
          }
        ]
      }
    ],
    "enablingConditions": [
      {
        "paramName": "caEvent",
        "paramValue": "custom_event",
        "type": "NOT_EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "eventCustomFields",
    "displayName": "Custom Fields",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SIMPLE_TABLE",
        "name": "customEventTable",
        "displayName": "",
        "simpleTableColumns": [
          {
            "defaultValue": "",
            "displayName": "FIeld Name:",
            "name": "field_name",
            "type": "TEXT"
          },
          {
            "defaultValue": "",
            "displayName": "Field Value:",
            "name": "field_value",
            "type": "TEXT"
          }
        ]
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "productFields",
    "displayName": "Product Fields",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "SELECT",
        "name": "productArray",
        "displayName": "Product Array:",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "help": "An array containing all items/products details.",
        "notSetText": "",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "caEvent",
                "paramValue": "add_shipping_info",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "add_to_cart",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "add_to_wishlist",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "begin_checkout",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "purchase",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "remove_from_cart",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "select_item",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "view_item",
                "type": "EQUALS"
              },
              {
                "paramName": "caEvent",
                "paramValue": "view_item_list",
                "type": "EQUALS"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productId",
        "displayName": "Product Id:",
        "simpleValueType": true,
        "help": "Product identifier property inside your \"Product Array\".",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "productArray",
                "paramValue": "",
                "type": "PRESENT"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productName",
        "displayName": "Product Name:",
        "simpleValueType": true,
        "help": "Product name property inside your \"Product Array\".",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "productArray",
                "paramValue": "",
                "type": "PRESENT"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productPrice",
        "displayName": "Product Price:",
        "simpleValueType": true,
        "help": "Product price property inside your \"Product Array\".",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "productArray",
                "paramValue": "",
                "type": "PRESENT"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productQuantity",
        "displayName": "Product Quantity:",
        "simpleValueType": true,
        "help": "Product quantity property inside your \"Product Array\".",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "productArray",
                "paramValue": "",
                "type": "PRESENT"
              }
            ]
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "productCurrency",
        "displayName": "Product Currency:",
        "simpleValueType": true,
        "help": "Product currency, in 3-letter ISO 4217 format, inside your \"Product Array\". If set, event-level currency is ignored.  Multiple currencies per event is not supported. Each item should set the same currency."
      },
      {
        "type": "TEXT",
        "name": "productCategory1",
        "displayName": "Product Category1:",
        "simpleValueType": true,
        "help": "Product category1 property inside your \"Product Array\"."
      },
      {
        "type": "TEXT",
        "name": "productCategory2",
        "displayName": "Product Category2:",
        "simpleValueType": true,
        "help": "Product category2 property inside your \"Product Array\". Used to specify an additional category."
      },
      {
        "type": "TEXT",
        "name": "productCategory3",
        "displayName": "Product Category3:",
        "simpleValueType": true,
        "help": "Product category3 property inside your \"Product Array\". Used to specify an additional category."
      },
      {
        "type": "TEXT",
        "name": "productBrand",
        "displayName": "Product Brand:",
        "simpleValueType": true,
        "help": "Product brand property inside your \"Product Array\"."
      },
      {
        "type": "TEXT",
        "name": "productSize",
        "displayName": "Product Size:",
        "simpleValueType": true,
        "help": "Product size property inside your \"Product Array\"."
      },
      {
        "type": "TEXT",
        "name": "productColors",
        "displayName": "Product Colors:",
        "simpleValueType": true,
        "help": "Product colors property inside your \"Product Array\". E.g. [\"red\", \"blue\", \"green\"]."
      },
      {
        "type": "TEXT",
        "name": "productVariant",
        "displayName": "Product Variant:",
        "simpleValueType": true,
        "help": "Product variant property inside your \"Product Array\"."
      },
      {
        "type": "TEXT",
        "name": "productListPosition",
        "displayName": "Product List Position:",
        "simpleValueType": true,
        "help": "Product position property inside your \"Product Array\". This position is intended in a list or collection."
      },
      {
        "type": "TEXT",
        "name": "productDiscount",
        "displayName": "Product Discount:",
        "simpleValueType": true,
        "help": "Product discount property inside your \"Product Array\". This is the monetary value of discount associated with a purchase."
      },
      {
        "type": "TEXT",
        "name": "productCoupon",
        "displayName": "Product Coupon:",
        "simpleValueType": true,
        "help": "Product coupon property inside your \"Product Array\". This is associated with an item."
      },
      {
        "type": "TEXT",
        "name": "productCustom",
        "displayName": "Product Custom:",
        "simpleValueType": true,
        "help": "Product custom property inside your \"Product Array\". This is an object containing custom properties you want to send."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "caEvent",
        "paramValue": "add_payment_info",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "add_shipping_info",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "add_to_cart",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "add_to_wishlist",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "begin_checkout",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "purchase",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "refund",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "remove_from_cart",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "select_item",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "view_cart",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "view_item",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "view_item_list",
        "type": "EQUALS"
      },
      {
        "paramName": "caEvent",
        "paramValue": "custom_event",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "GROUP",
    "name": "userFields",
    "displayName": "User Fields",
    "groupStyle": "ZIPPY_OPEN",
    "subParams": [
      {
        "type": "TEXT",
        "name": "pUserId",
        "displayName": "User Id:",
        "simpleValueType": true,
        "help": "User identifier. (*) This is required if \"User Email\" is not set.",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "pUserEmail",
                "paramValue": "",
                "type": "NOT_PRESENT"
              }
            ],
            "errorMessage": "\"User Id\" is required if \"User Email\" is empty."
          }
        ],
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "oUserId",
        "displayName": "User Id:",
        "simpleValueType": true,
        "help": "User identifier.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "NOT_EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "pUserEmail",
        "displayName": "User Email:",
        "simpleValueType": true,
        "help": "User email. (*) This is required if \"User Id\" is not set.",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": [
              {
                "paramName": "pUserId",
                "paramValue": "",
                "type": "NOT_PRESENT"
              }
            ],
            "errorMessage": "\"User Email\" is required if \"User Id\" is empty."
          }
        ],
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "oUserEmail",
        "displayName": "User Email:",
        "simpleValueType": true,
        "help": "User email.",
        "enablingConditions": [
          {
            "paramName": "caEvent",
            "paramValue": "purchase",
            "type": "NOT_EQUALS"
          }
        ]
      },
      {
        "type": "TEXT",
        "name": "userPhone",
        "displayName": "User Phone:",
        "simpleValueType": true,
        "help": "User phone."
      },
      {
        "type": "TEXT",
        "name": "userGender",
        "displayName": "User Gender:",
        "simpleValueType": true,
        "help": "User gender."
      },
      {
        "type": "TEXT",
        "name": "userBirthdate",
        "displayName": "User Birthdate",
        "simpleValueType": true,
        "help": "User birthdate"
      },
      {
        "type": "TEXT",
        "name": "userFirstName",
        "displayName": "User First Name:",
        "simpleValueType": true,
        "help": "User first name."
      },
      {
        "type": "TEXT",
        "name": "userLastName",
        "displayName": "User Last Name:",
        "simpleValueType": true,
        "help": "User last name."
      },
      {
        "type": "TEXT",
        "name": "userCity",
        "displayName": "User City:",
        "simpleValueType": true,
        "help": "User city."
      },
      {
        "type": "TEXT",
        "name": "userCountry",
        "displayName": "User Country:",
        "simpleValueType": true,
        "help": "User country."
      },
      {
        "type": "TEXT",
        "name": "userZipcode",
        "displayName": "User Zipcode:",
        "simpleValueType": true,
        "help": "User zipcode."
      },
      {
        "type": "SELECT",
        "name": "userConsentCategories",
        "displayName": "User Consent Categories:",
        "macrosInSelect": true,
        "selectItems": [],
        "simpleValueType": true,
        "help": "Consent categories of the user, to be allowed to share the event with partners. Example [1,3,4]. (*) Automatically filled if you use Commanders Act CMP.",
        "valueValidators": [
          {
            "type": "NON_EMPTY",
            "enablingConditions": []
          }
        ],
        "notSetText": ""
      }
    ]
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const injectScript = require('injectScript');
const callInWindow = require('callInWindow');
const queryPermission = require('queryPermission');
const makeNumber = require('makeNumber');
const log = require('logToConsole');

const tcLib = 'https://cdn.tagcommander.com/events/events.js';

function mapItem(p) {
    return {
        id: p[data.productId],
        variant: p[data.productVariant],
        list_position: makeNumber(p[data.productListPosition]),
        discount: makeNumber(p[data.productDiscount]),
        quantity: makeNumber(p[data.productQuantity]),
        coupon: p[data.productCoupon],
        custom: p[data.productCustom],
        product: {
            id: p[data.productId],
            name: p[data.productName],
            price: makeNumber(p[data.productPrice]),
            currency: p[data.productCurrency],
            category_1: p[data.productCategory1],
            category_2: p[data.productCategory2],
            category_3: p[data.productCategory3],
            brand: p[data.productBrand],
            colors: p[data.productColors],
            size: p[data.productSize]
        }
    };
}

function getCustomEventId() {
  if ((typeof data.customEventId !== "undefined") && (data.customEventId !== "")) return data.customEventId;
  else return "";
}

function getTestCode() {
  if ((typeof data.testEventCode !== "undefined") && (data.testEventCode !== "")) return data.testEventCode;
  else return "";
}

var caEventData = {};
caEventData.integrations = {};
caEventData.integrations.facebook = {};
caEventData.integrations.facebook.event_id = getCustomEventId();
caEventData.test_code = getTestCode();

var config = {
    siteId: data.caSiteId,
    sourceKey: data.caSourceKey,
    collectionDomain: ((typeof data.caCollectionDomain !== "undefined") && (data.caCollectionDomain !== ""))?data.caCollectionDomain:"collect.commander1.com"
};

function setAdditionalUserProperties() {
  if (data.userPhone) caEventData.user.phone = data.userPhone;
  if (data.userGender) caEventData.user.gender = data.userGender;
  if (data.userBirthdate) caEventData.user.birthdate = data.userBirthdate;
  if (data.userFirstName) caEventData.user.firstname = data.userFirstName;
  if (data.userLastName) caEventData.user.lastname = data.userLastName;
  if (data.userCity) caEventData.user.city = data.userCity;
  if (data.userCountry) caEventData.user.country = data.userCountry;
  if (data.userZipcode) caEventData.user.zipcode = data.userZipcode;
}

if (typeof data.productArray === "undefined") data.productArray = [];
if (data.caEvent) {
	if (data.caEvent === "generate_lead") {
		if (data.leadId) caEventData.id = data.leadId;
	}
	else if ((data.caEvent === "purchase") || (data.caEvent === "refund")) {
		if (data.transactionId) caEventData.id = data.transactionId;
	}
	if (data.caEvent === "login") {
		if (data.method) caEventData.method = data.method;
	}
	else if (data.caEvent === "sign_up") {
		if (data.signupMethod) caEventData.method = data.signupMethod;
	}
	if (data.caEvent === "page_view") {
		if (data.pageType) caEventData.type = data.pageType;
	}
	else if ((data.caEvent === "purchase") || (data.caEvent === "refund")) {
		if (data.conversionType) caEventData.type = data.conversionType;
	}
	if (data.paymentMethod) caEventData.payment_method = data.paymentMethod;
	if (data.shippingTier) caEventData.shipping_tier = data.shippingTier;
	if (data.shippingAmount) caEventData.shipping_amount = makeNumber(data.shippingAmount);
    if (data.revenue) caEventData.revenue = makeNumber(data.revenue);
	if (data.value) caEventData.value = makeNumber(data.value);
    if (data.currency) caEventData.currency = data.currency;
    if (data.coupon) caEventData.coupon = data.coupon;
	if (data.pageName) caEventData.name = data.pageName;
	if (data.status) caEventData.status = data.status;
	if (data.taxAmount) caEventData.tax_amount = makeNumber(data.taxAmount);
	if (data.searchTerm) caEventData.search_term = data.searchTerm;
	if (data.contentType) caEventData.content_type = data.contentType;
	if (data.itemId) caEventData.item_id = data.itemId;
	if (data.itemListName) caEventData.item_list_name = data.itemListName;
    caEventData.user = {};
	if (data.caEvent === "purchase") {
		if (data.pUserId) caEventData.user.id = data.pUserId;
		if (data.pUserEmail) caEventData.user.email = data.pUserEmail;
	} else {
		if (data.oUserId) caEventData.user.id = data.oUserId;
		if (data.oUserEmail) caEventData.user.email = data.oUserEmail;
	}
    setAdditionalUserProperties();
    if (data.userConsentCategories) caEventData.user.consent_categories = data.userConsentCategories;
    caEventData.items = data.productArray.map(function (p) {
      return mapItem(p);
    });
	if (data.customEventTable) {
      for (let i = 0; i < data.customEventTable.length; i++) 
        caEventData[data.customEventTable[i].field_name] = data.customEventTable[i].field_value;
    }
}

if (queryPermission('inject_script', tcLib)) {
  log('START | Inject library...');
  injectScript(tcLib, onSuccess, data.gtmOnFailure, tcLib);
  log('END | Inject library');
} else {
  log('DEBUG | postScriptUrl: Script load failed due to permissions mismatch.');
  data.gtmOnFailure();
}

function onSuccess() {
  log('START | Triggering cact...');
  let eventName = "";
  if (data.caEvent === "custom_event") eventName = data.customEventName;
  else eventName = data.caEvent;
  log(eventName);
  log(caEventData);
  callInWindow('cact', 'trigger', eventName, caEventData, config, (data.callbackFunction)?data.callbackFunction:undefined);
  log('END | Triggering cact');
  data.gtmOnSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "cact"
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": false
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.tagcommander.com/*"
              },
              {
                "type": 1,
                "string": "https://ct-sandbox.commandersdev.com/*"
              },
              {
                "type": 1,
                "string": "https://commanders-act.s3.eu-central-1.amazonaws.com/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: 'Test #1 | Event | Add Payment Info'
  code: |-
    const log = require('logToConsole');
    function myCallback() {
      log("myCallback is triggered!!!");
    }

    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "add_payment_info",
        paymentMethod: "card",
        callbackFunction: myCallback,
        revenue: "5375.50",
        currency: "EUR",
        coupon: "PROMO5",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #2 | Event | Add Shipping Info'
  code: "const mockData = {\n    // Mocked field values\n    caSiteId: \"1739\",\n\
    \    caCollectionDomain: \"collect.commander1.com\",\n    customEventId: \"123456789\"\
    ,\n    testEventCode: \"TEST12345\",\n    caEvent: \"add_shipping_info\",\n  \
    \  shippingTier: \"Next-day\",\n    value: \"5375.10\",\n    currency: \"EUR\"\
    ,\n    coupon: \"PROMO5\",\n    customEventTable: [{\"field_name\":\"fieldname1\"\
    ,\"field_value\":\"fieldvalue1\"},{\"field_name\":\"fieldname2\",\"field_value\"\
    :\"fieldvalue2\"}, {\"field_name\":\"fieldname3\",\"field_value\":\"fieldvalue3\"\
    }],     \n    productArray: [{\n            \"defaultLanguage\": null,\n     \
    \       \"cart_item_cod8\": \"\",\n            \"cart_item_cod10\": \"14548\"\
    ,\n            \"cart_item_name\": \"Wallet\",\n            \"cart_item_unitprice_ati\"\
    : \"275\",\n            \"cart_item_unitprice_tf\": \"225.41\",\n            \"\
    cart_item_discount_ati\": \"275\",\n            \"cart_item_discount_tf\": \"\
    225.41\",\n            \"cart_item_unit_discounted_ati\": \"275\",\n         \
    \   \"cart_item_unit_discounted_tf\": \"225.41\",\n            \"cart_item_quantity\"\
    : 1,\n            \"cart_item_macro_category\": \"Pelletteria\",\n           \
    \ \"cart_item_macro_category_id\": \"3074457345616676670\",\n            \"cart_item_micro_category\"\
    : \"Astucci portacarte\",\n            \"cart_item_micro_category_id\": \"3074457345616676709\"\
    ,\n            \"cart_item_brand\": \"MYBRAND\",\n            \"cart_item_brand_id\"\
    : \"MYBRANDID\",\n            \"cart_item_colors\": [\"Black\", \"White\"],\n\
    \            \"cart_item_color_id\": \"\",\n            \"cart_item_legacy_macro_id\"\
    : \"2774\",\n            \"cart_item_legacy_micro_id\": \"21383\",\n         \
    \   \"cart_item_product_id\": \"34480784411793309\",\n            \"cart_item_product_variant_id\"\
    : \"34480784411793399\",\n            \"cart_item_eng_title\": \"Wallet 6cc\"\
    ,\n            \"cart_item_engraved\": false,\n            \"cart_item_engravable\"\
    : false,\n            \"cart_item_embossed\": false,\n            \"cart_item_embossable\"\
    : true,\n            \"cart_item_adjusted\": false,\n            \"cart_item_adjustable\"\
    : false,\n            \"cart_item_collection\": \"MyCollection\",\n          \
    \  \"cart_item_subcollection\": \"\",\n            \"cart_item_line\": \"\",\n\
    \            \"cart_item_casematerial\": \"\",\n            \"cart_item_jewelmaterial\"\
    : \"\",\n            \"cart_item_leathermaterial\": \"\",\n            \"cart_item_strapmaterial\"\
    : \"\",\n            \"cart_item_mfPartNumber\": \"14548\",\n            \"cart_item_skuMfPartNumber\"\
    : \"4017941145482\",\n            \"cart_item_sellable\": \"ONLINE\",\n      \
    \      \"cart_item_size\": [{\n                    \"SizeId\": \"OneSize\",\n\
    \                    \"StockLevel\": \"Available\"\n                }\n      \
    \      ],\n            \"cart_item_availability\": true,\n            \"cart_item_line_id\"\
    : \"940562471838|2430642|0400571166790\"\n        }, {\n            \"defaultLanguage\"\
    : null,\n            \"cart_item_cod8\": \"\",\n            \"cart_item_cod10\"\
    : \"125582\",\n            \"cart_item_name\": \"Chronograph\",\n            \"\
    cart_item_unitprice_ati\": \"5100.80\",\n            \"cart_item_unitprice_tf\"\
    : \"4180.33\",\n            \"cart_item_discount_ati\": \"5100\",\n          \
    \  \"cart_item_discount_tf\": \"4180.33\",\n            \"cart_item_unit_discounted_ati\"\
    : \"5100\",\n            \"cart_item_unit_discounted_tf\": \"4180.33\",\n    \
    \        \"cart_item_quantity\": 1,\n            \"cart_item_macro_category\"\
    : \"Orologi\",\n            \"cart_item_macro_category_id\": \"3074457345616676672\"\
    ,\n            \"cart_item_micro_category\": \"Orologi da polso\",\n         \
    \   \"cart_item_micro_category_id\": \"3074457345616676729\",\n            \"\
    cart_item_brand\": \"MYBRAND\",\n            \"cart_item_brand_id\": \"MYBRANDID\"\
    ,\n            \"cart_item_colors\": [\"Silver\", \"Orange\"],\n            \"\
    cart_item_color_id\": \"\",\n            \"cart_item_legacy_macro_id\": \"2776\"\
    ,\n            \"cart_item_legacy_micro_id\": \"21376\",\n            \"cart_item_product_id\"\
    : \"19971654706583601\",\n            \"cart_item_product_variant_id\": \"19971654706583602\"\
    ,\n            \"cart_item_eng_title\": \"Chronograph\",\n            \"cart_item_engraved\"\
    : false,\n            \"cart_item_engravable\": false,\n            \"cart_item_embossed\"\
    : false,\n            \"cart_item_embossable\": false,\n            \"cart_item_adjusted\"\
    : false,\n            \"cart_item_adjustable\": false,\n            \"cart_item_collection\"\
    : \"MyCollection\",\n            \"cart_item_subcollection\": \"\",\n        \
    \    \"cart_item_line\": \"\",\n            \"cart_item_casematerial\": \"Acciaio\"\
    ,\n            \"cart_item_jewelmaterial\": \"\",\n            \"cart_item_leathermaterial\"\
    : \"\",\n            \"cart_item_strapmaterial\": \"\",\n            \"cart_item_mfPartNumber\"\
    : \"125582\",\n            \"cart_item_skuMfPartNumber\": \"7612582328620\",\n\
    \            \"cart_item_sellable\": \"ONLINE\",\n            \"cart_item_size\"\
    : [{\n                    \"SizeId\": \"OneSize\",\n                    \"StockLevel\"\
    : \"Available\"\n                }\n            ],\n            \"cart_item_availability\"\
    : true,\n            \"cart_item_line_id\": \"940562471838|2430643|0400572466936\"\
    \n        }\n    ],\n  productId: \"cart_item_product_id\",\n  productName: \"\
    cart_item_name\",\n  productPrice: \"cart_item_unitprice_ati\",\n  productQuantity:\
    \ \"cart_item_quantity\",\n  productCurrency: \"EUR\",\n  productCategory1: \"\
    cart_item_macro_category_id\",\n  productCategory2: \"cart_item_micro_category_id\"\
    ,\n  productBrand: \"cart_item_brand\",\n  productSize: \"\",\n  productColors:\
    \ \"cart_item_colors\",\n  productVariant: \"cart_item_product_variant_id\",\n\
    \  productListPosition: \"\",\n  productDiscount: \"\",\n  productCoupon: \"PROMO5\"\
    ,\n  productCustom: \"\",\n  oUserId: \"123456789\",\n  oUserEmail: \"test@test.it\"\
    ,\n  userPhone: \"00393399988776\",\n  userGender: \"male\",\n  userBirthdate:\
    \ \"12-31-1900\",\n  userFirstName: \"testFirstName\",\n  userLastName: \"testLastName\"\
    ,\n  userCity: \"Milan\",\n  userCountry: \"Italy\",\n  userZipcode: \"20100\"\
    ,\n  userConsentCategories: [1,3,4]\n};\n\n// Call runCode to run the template's\
    \ code.\nrunCode(mockData);\n\nassertThat('window.cact').isDefined();"
- name: 'Test #3 | Event | Add to Cart'
  code: "const mockData = {\n    // Mocked field values\n    caSiteId: \"1739\",\n\
    \    caCollectionDomain: \"collect.commander1.com\",\n    customEventId: \"123456789\"\
    ,\n    testEventCode: \"TEST12345\",\n    caEvent: \"add_to_cart\",\n    value:\
    \ \"5375.00\",\n    currency: \"EUR\",\n    customEventTable: [{\"field_name\"\
    :\"fieldname1\",\"field_value\":\"fieldvalue1\"},{\"field_name\":\"fieldname2\"\
    ,\"field_value\":\"fieldvalue2\"}, {\"field_name\":\"fieldname3\",\"field_value\"\
    :\"fieldvalue3\"}], \n    productArray: [{\n            \"defaultLanguage\": null,\n\
    \            \"cart_item_cod8\": \"\",\n            \"cart_item_cod10\": \"14548\"\
    ,\n            \"cart_item_name\": \"Wallet\",\n            \"cart_item_unitprice_ati\"\
    : \"275\",\n            \"cart_item_unitprice_tf\": \"225.41\",\n            \"\
    cart_item_discount_ati\": \"275\",\n            \"cart_item_discount_tf\": \"\
    225.41\",\n            \"cart_item_unit_discounted_ati\": \"275\",\n         \
    \   \"cart_item_unit_discounted_tf\": \"225.41\",\n            \"cart_item_quantity\"\
    : 1,\n            \"cart_item_macro_category\": \"Pelletteria\",\n           \
    \ \"cart_item_macro_category_id\": \"3074457345616676670\",\n            \"cart_item_micro_category\"\
    : \"Astucci portacarte\",\n            \"cart_item_micro_category_id\": \"3074457345616676709\"\
    ,\n            \"cart_item_brand\": \"MYBRAND\",\n            \"cart_item_brand_id\"\
    : \"MYBRANDID\",\n            \"cart_item_colors\": [\"Black\", \"White\"],\n\
    \            \"cart_item_color_id\": \"\",\n            \"cart_item_legacy_macro_id\"\
    : \"2774\",\n            \"cart_item_legacy_micro_id\": \"21383\",\n         \
    \   \"cart_item_product_id\": \"34480784411793309\",\n            \"cart_item_product_variant_id\"\
    : \"34480784411793399\",\n            \"cart_item_eng_title\": \"Wallet 6cc\"\
    ,\n            \"cart_item_engraved\": false,\n            \"cart_item_engravable\"\
    : false,\n            \"cart_item_embossed\": false,\n            \"cart_item_embossable\"\
    : true,\n            \"cart_item_adjusted\": false,\n            \"cart_item_adjustable\"\
    : false,\n            \"cart_item_collection\": \"MyCollection\",\n          \
    \  \"cart_item_subcollection\": \"\",\n            \"cart_item_line\": \"\",\n\
    \            \"cart_item_casematerial\": \"\",\n            \"cart_item_jewelmaterial\"\
    : \"\",\n            \"cart_item_leathermaterial\": \"\",\n            \"cart_item_strapmaterial\"\
    : \"\",\n            \"cart_item_mfPartNumber\": \"14548\",\n            \"cart_item_skuMfPartNumber\"\
    : \"4017941145482\",\n            \"cart_item_sellable\": \"ONLINE\",\n      \
    \      \"cart_item_size\": [{\n                    \"SizeId\": \"OneSize\",\n\
    \                    \"StockLevel\": \"Available\"\n                }\n      \
    \      ],\n            \"cart_item_availability\": true,\n            \"cart_item_line_id\"\
    : \"940562471838|2430642|0400571166790\"\n        }, {\n            \"defaultLanguage\"\
    : null,\n            \"cart_item_cod8\": \"\",\n            \"cart_item_cod10\"\
    : \"125582\",\n            \"cart_item_name\": \"Chronograph\",\n            \"\
    cart_item_unitprice_ati\": \"5100.80\",\n            \"cart_item_unitprice_tf\"\
    : \"4180.33\",\n            \"cart_item_discount_ati\": \"5100\",\n          \
    \  \"cart_item_discount_tf\": \"4180.33\",\n            \"cart_item_unit_discounted_ati\"\
    : \"5100\",\n            \"cart_item_unit_discounted_tf\": \"4180.33\",\n    \
    \        \"cart_item_quantity\": 1,\n            \"cart_item_macro_category\"\
    : \"Orologi\",\n            \"cart_item_macro_category_id\": \"3074457345616676672\"\
    ,\n            \"cart_item_micro_category\": \"Orologi da polso\",\n         \
    \   \"cart_item_micro_category_id\": \"3074457345616676729\",\n            \"\
    cart_item_brand\": \"MYBRAND\",\n            \"cart_item_brand_id\": \"MYBRANDID\"\
    ,\n            \"cart_item_colors\": [\"Silver\", \"Orange\"],\n            \"\
    cart_item_color_id\": \"\",\n            \"cart_item_legacy_macro_id\": \"2776\"\
    ,\n            \"cart_item_legacy_micro_id\": \"21376\",\n            \"cart_item_product_id\"\
    : \"19971654706583601\",\n            \"cart_item_product_variant_id\": \"19971654706583602\"\
    ,\n            \"cart_item_eng_title\": \"Chronograph\",\n            \"cart_item_engraved\"\
    : false,\n            \"cart_item_engravable\": false,\n            \"cart_item_embossed\"\
    : false,\n            \"cart_item_embossable\": false,\n            \"cart_item_adjusted\"\
    : false,\n            \"cart_item_adjustable\": false,\n            \"cart_item_collection\"\
    : \"MyCollection\",\n            \"cart_item_subcollection\": \"\",\n        \
    \    \"cart_item_line\": \"\",\n            \"cart_item_casematerial\": \"Acciaio\"\
    ,\n            \"cart_item_jewelmaterial\": \"\",\n            \"cart_item_leathermaterial\"\
    : \"\",\n            \"cart_item_strapmaterial\": \"\",\n            \"cart_item_mfPartNumber\"\
    : \"125582\",\n            \"cart_item_skuMfPartNumber\": \"7612582328620\",\n\
    \            \"cart_item_sellable\": \"ONLINE\",\n            \"cart_item_size\"\
    : [{\n                    \"SizeId\": \"OneSize\",\n                    \"StockLevel\"\
    : \"Available\"\n                }\n            ],\n            \"cart_item_availability\"\
    : true,\n            \"cart_item_line_id\": \"940562471838|2430643|0400572466936\"\
    \n        }\n    ],\n  productId: \"cart_item_product_id\",\n  productName: \"\
    cart_item_name\",\n  productPrice: \"cart_item_unitprice_ati\",\n  productQuantity:\
    \ \"cart_item_quantity\",\n  productCurrency: \"EUR\",\n  productCategory1: \"\
    cart_item_macro_category_id\",\n  productCategory2: \"cart_item_micro_category_id\"\
    ,\n  productBrand: \"cart_item_brand\",\n  productSize: \"\",\n  productColors:\
    \ \"cart_item_colors\",\n  productVariant: \"cart_item_product_variant_id\",\n\
    \  productListPosition: \"\",\n  productDiscount: \"\",\n  productCoupon: \"PROMO5\"\
    ,\n  productCustom: \"\",\n  oUserId: \"123456789\",\n  oUserEmail: \"test@test.it\"\
    ,\n  userPhone: \"00393399988776\",\n  userGender: \"male\",\n  userBirthdate:\
    \ \"12-31-1900\",\n  userFirstName: \"testFirstName\",\n  userLastName: \"testLastName\"\
    ,\n  userCity: \"Milan\",\n  userCountry: \"Italy\",\n  userZipcode: \"20100\"\
    ,\n  userConsentCategories: [1,3,4]\n};\n\n// Call runCode to run the template's\
    \ code.\nrunCode(mockData);\n\nassertThat('window.cact').isDefined();"
- name: 'Test #4 | Event | Add to Wishlist'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "add_to_wishlist",
        value: "5375.00",
        currency: "EUR",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #5 | Event | Begin Checkout'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "begin_checkout",
        revenue: "5375.00",
        value: "5375.00",
        currency: "EUR",
        coupon: "PROMO5",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #6 | Event | Generate Lead'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "generate_lead",
      value: "5375.00",
      currency: "EUR",
      leadId: "testLeadId",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #7 | Event | Login'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "login",
      method: "Linkedin",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #8 | Event | Page View'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "page_view",
      pageType: "home",
      pageName: "TestPage",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #9 | Event | Purchase'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "purchase",
        transactionId: "testTransactionId",
        paymentMethod: "card",
        value: "5375.00",
        revenue: "5375.00",
        shippingAmount: "5.00",
        taxAmount: "49.90",
        conversionType: "online",
        status: "in_progress",
        currency: "EUR",
        coupon: "PROMO5",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      pUserId: "123456789",
      pUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #10 | Event | Refund'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "refund",
        transactionId: "testTransactionId",
        value: "5375.75",
        revenue: "5375.80",
        shippingAmount: "5.00",
        taxAmount: "49.90",
        conversionType: "online",
        status: "in_progress",
        currency: "EUR",
        coupon: "PROMO5",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #11 | Event | Remove from Cart'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "remove_from_cart",
        value: "5375.00",
        currency: "EUR",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #12 | Event | Search'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "search",
      searchTerm: "t-shirts",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #13 | Event | Select Content'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "select_content",
      contentType: "product",
      itemId: "34480784411793309",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #14 | Event | Select Item'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "select_item",
      itemListName: "testItemListName",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #15 | Event | Sign-up'
  code: |-
    const mockData = {
      // Mocked field values
      caSiteId: "1739",
      caCollectionDomain: "collect.commander1.com",
      customEventId: "123456789",
      testEventCode: "TEST12345",
      caEvent: "sign_up",
      signupMethod: "Facebook",
      customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #16 | Event | View Cart'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "view_cart",
        value: "5375.00",
        currency: "EUR",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #17 | Event | View Item'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "view_item",
        revenue: "5375.00",
        currency: "EUR",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #18 | Event | View Item List'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "view_item_list",
        itemListName: "testItemListName",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
- name: 'Test #19 | Event | [Custom Event]'
  code: |-
    const mockData = {
        // Mocked field values
        caSiteId: "1739",
        caCollectionDomain: "collect.commander1.com",
        customEventId: "123456789",
        testEventCode: "TEST12345",
        caEvent: "custom_event",
        customEventName: "subscribe",
        customEventTable: [{"field_name":"fieldname1","field_value":"fieldvalue1"},{"field_name":"fieldname2","field_value":"fieldvalue2"}, {"field_name":"fieldname3","field_value":"fieldvalue3"}],
        itemListName: "testItemListName",
        productArray: [{
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "14548",
                "cart_item_name": "Wallet",
                "cart_item_unitprice_ati": "275",
                "cart_item_unitprice_tf": "225.41",
                "cart_item_discount_ati": "275",
                "cart_item_discount_tf": "225.41",
                "cart_item_unit_discounted_ati": "275",
                "cart_item_unit_discounted_tf": "225.41",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Pelletteria",
                "cart_item_macro_category_id": "3074457345616676670",
                "cart_item_micro_category": "Astucci portacarte",
                "cart_item_micro_category_id": "3074457345616676709",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Black", "White"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2774",
                "cart_item_legacy_micro_id": "21383",
                "cart_item_product_id": "34480784411793309",
                "cart_item_product_variant_id": "34480784411793399",
                "cart_item_eng_title": "Wallet 6cc",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": true,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "14548",
                "cart_item_skuMfPartNumber": "4017941145482",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430642|0400571166790"
            }, {
                "defaultLanguage": null,
                "cart_item_cod8": "",
                "cart_item_cod10": "125582",
                "cart_item_name": "Chronograph",
                "cart_item_unitprice_ati": "5100.80",
                "cart_item_unitprice_tf": "4180.33",
                "cart_item_discount_ati": "5100",
                "cart_item_discount_tf": "4180.33",
                "cart_item_unit_discounted_ati": "5100",
                "cart_item_unit_discounted_tf": "4180.33",
                "cart_item_quantity": 1,
                "cart_item_macro_category": "Orologi",
                "cart_item_macro_category_id": "3074457345616676672",
                "cart_item_micro_category": "Orologi da polso",
                "cart_item_micro_category_id": "3074457345616676729",
                "cart_item_brand": "MYBRAND",
                "cart_item_brand_id": "MYBRANDID",
                "cart_item_colors": ["Silver", "Orange"],
                "cart_item_color_id": "",
                "cart_item_legacy_macro_id": "2776",
                "cart_item_legacy_micro_id": "21376",
                "cart_item_product_id": "19971654706583601",
                "cart_item_product_variant_id": "19971654706583602",
                "cart_item_eng_title": "Chronograph",
                "cart_item_engraved": false,
                "cart_item_engravable": false,
                "cart_item_embossed": false,
                "cart_item_embossable": false,
                "cart_item_adjusted": false,
                "cart_item_adjustable": false,
                "cart_item_collection": "MyCollection",
                "cart_item_subcollection": "",
                "cart_item_line": "",
                "cart_item_casematerial": "Acciaio",
                "cart_item_jewelmaterial": "",
                "cart_item_leathermaterial": "",
                "cart_item_strapmaterial": "",
                "cart_item_mfPartNumber": "125582",
                "cart_item_skuMfPartNumber": "7612582328620",
                "cart_item_sellable": "ONLINE",
                "cart_item_size": [{
                        "SizeId": "OneSize",
                        "StockLevel": "Available"
                    }
                ],
                "cart_item_availability": true,
                "cart_item_line_id": "940562471838|2430643|0400572466936"
            }
        ],
      productId: "cart_item_product_id",
      productName: "cart_item_name",
      productPrice: "cart_item_unitprice_ati",
      productQuantity: "cart_item_quantity",
      productCurrency: "EUR",
      productCategory1: "cart_item_macro_category_id",
      productCategory2: "cart_item_micro_category_id",
      productBrand: "cart_item_brand",
      productSize: "",
      productColors: "cart_item_colors",
      productVariant: "cart_item_product_variant_id",
      productListPosition: "",
      productDiscount: "",
      productCoupon: "PROMO5",
      productCustom: "",
      oUserId: "123456789",
      oUserEmail: "test@test.it",
      userPhone: "00393399988776",
      userGender: "male",
      userBirthdate: "12-31-1900",
      userFirstName: "testFirstName",
      userLastName: "testLastName",
      userCity: "Milan",
      userCountry: "Italy",
      userZipcode: "20100",
      userConsentCategories: [1,3,4]
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    assertThat('window.cact').isDefined();
setup: ''


___NOTES___

Created on 16/8/2022, 16:44:13


